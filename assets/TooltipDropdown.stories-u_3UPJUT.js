import{j as F}from"./jsx-runtime-QvtbNqby.js";import{u as yt}from"./index-yfVukVkJ.js";import{u as A}from"./usePrefix-CXWdRn9x.js";import{_ as N,b as Ct,u as Tt,m as M,f as $t,h as Et,c as _t,S as St,i as Dt,E as Nt,H as Vt,p as kt}from"./floating-ui.dom.mjs-PU7UL9dJ.js";import{c as _}from"./index-CjLpwf8N.js";import{c as ze,L as me,a as He}from"./index-DVr8swhD.js";import{P as t}from"./index-kGlasm3i.js";import{R as i,r as d}from"./index-BjzEU6Zr.js";import{C as Oe}from"./bucket-3-Dq7FRXBG.js";import{c as Lt,d as Rt}from"./bucket-2-C9DXCKPV.js";import{m as vt}from"./mergeRefs-CTUecegF.js";import{T as Pe,d as We}from"./deprecate-GNGtdTso.js";import{F as Ot}from"./FormContext-IWjAIOZU.js";import{W as Pt,a as Wt}from"./bucket-18-ByJs4WER.js";import{k as Ft}from"./index-CfoIBI3E.js";import"./index-B22udTS1.js";import"./extends-CF3RwP-h.js";import"./Icon-CpyVU44g.js";var Fe,je;const jt={"clear.all":"Clear all selected items","clear.selection":"Clear selected item"};function Mt(n){return jt[n]}function Ke(n){let{clearSelection:p,selectionCount:r,translateWithId:m=Mt,disabled:u,onClearSelection:a,...x}=n;const f=A(),h=_(`${f}--list-box__selection`,{[`${f}--tag--filter`]:r,[`${f}--list-box__selection--multi`]:r}),y=m(r?"clear.all":"clear.selection"),S=_(`${f}--tag`,`${f}--tag--filter`,`${f}--tag--high-contrast`,{[`${f}--tag--disabled`]:u});function I(C){C.stopPropagation(),!u&&(p(C),a&&a(C))}return r?i.createElement("div",{className:S},i.createElement("span",{className:`${f}--tag__label`,title:r?.toString()},r),i.createElement("button",{"aria-label":y,className:`${f}--tag__close-icon`,disabled:u,onClick:I,tabIndex:-1,title:y,type:"button"},Fe||(Fe=i.createElement(Oe,null)))):i.createElement("button",N({},x,{"aria-label":y,className:h,disabled:u,onClick:I,tabIndex:-1,title:y,type:"button"}),je||(je=i.createElement(Oe,null)))}Ke.propTypes={clearSelection:t.func.isRequired,disabled:t.bool,onClearSelection:t.func,onClick:t.func,onMouseUp:t.func,onKeyDown:t.func,selectionCount:t.number,translateWithId:t.func};var Me;const Ae={"close.menu":"close.menu","open.menu":"open.menu"},At={[Ae["close.menu"]]:"Close",[Ae["open.menu"]]:"Open"},Bt=n=>At[n],Ue=i.forwardRef(function(p,r){let{isOpen:m,translateWithId:u=Bt,...a}=p;const x=A(),f=_({[`${x}--list-box__menu-icon`]:!0,[`${x}--list-box__menu-icon--open`]:m}),h=u(m?"close.menu":"open.menu");return i.createElement("button",N({},a,{"aria-label":h,title:h,className:f,type:"button",tabIndex:-1,ref:r}),Me||(Me=i.createElement(Lt,null)))});Ue.propTypes={isOpen:t.bool.isRequired,translateWithId:t.func};const{InputBlur:qt,InputKeyDownEnter:zt,FunctionToggleMenu:Ht,ToggleButtonClick:Kt,ItemMouseMove:Ut,InputKeyDownArrowUp:Jt,InputKeyDownArrowDown:Gt,MenuMouseLeave:Qt}=ze.stateChangeTypes,Je=n=>typeof n=="string"?n:typeof n=="number"?`${n}`:n!==null&&typeof n=="object"&&"label"in n&&typeof n.label=="string"?n.label:"",Be=()=>!0,pe=n=>{let{item:p,inputValue:r}=n;if(r===null||r==="")return!0;const m=p.toLowerCase(),u=r.toLowerCase();return m.startsWith(u)},qe=n=>{let{initialSelectedItem:p,inputValue:r,itemToString:m,selectedItem:u,prevSelectedItem:a}=n;return u?m(u):p?m(p):!u&&a?"":r||""},Xt=(n,p)=>{let{items:r,itemToString:m=Je}=n;if(!p)return-1;const u=p.toLowerCase();for(let a=0;a<r.length;a++){const x=m(r[a]).toLowerCase();if(!r[a].disabled&&x.indexOf(u)!==-1)return a}return-1},fe=d.forwardRef((n,p)=>{const[r,m]=d.useState(0),u=d.useRef(0),a=d.useRef(null),{["aria-label"]:x="Choose an item",ariaLabel:f,autoAlign:h=!1,className:y,direction:S="bottom",disabled:I=!1,downshiftActions:C,downshiftProps:V,helperText:O,id:te,initialSelectedItem:ne,invalid:k,invalidText:ge,items:L,itemToElement:he=null,itemToString:b=Je,light:Xe,onChange:T,onInputChange:se,onToggleClick:be,placeholder:Ye,readOnly:P,selectedItem:D,shouldFilterItem:xe=Be,size:Ze,titleText:Ie,translateWithId:we,typeahead:B=!1,warn:q,warnText:ye,allowCustomValue:R=!1,slug:z,...et}=n,{refs:$,floatingStyles:Ce,middlewareData:tt}=Ct(h?{placement:S,strategy:"fixed",middleware:[$t(),Et()],whileElementsMounted:_t}:{}),oe=$?.reference?.current?.clientWidth;d.useEffect(()=>{if(h){const e={...Ce,visibility:tt.hide?.referenceHidden?"hidden":"visible"};Object.keys(e).forEach(s=>{$.floating.current&&($.floating.current.style[s]=e[s])}),oe&&$.floating.current&&($.floating.current.style.width=oe+"px")}},[h,Ce,$.floating,oe]);const[l,le]=d.useState(qe({initialSelectedItem:ne,inputValue:"",itemToString:b,selectedItem:D})),[H,K]=d.useState("");d.useEffect(()=>{if(B){if(l.length>=u.current)if(l){const e=L.filter(s=>pe({item:b(s),inputValue:l}));if(e.length>0){const s=b(e[0]);K(s.slice(l.length))}else K("")}else K("");else K("");u.current=l.length}},[B,l,L,b,pe]);const c=A(),{isFluid:U}=d.useContext(Ot),v=d.useRef(null),ae=Tt(),[re,nt]=d.useState(!1),ie=d.useRef(se),ce=d.useRef(D);d.useEffect(()=>{if(ce.current!==D){const e=qe({initialSelectedItem:ne,inputValue:l,itemToString:b,selectedItem:D,prevSelectedItem:ce.current});le(e),T({selectedItem:D,inputValue:e}),ce.current=D}},[D]);const J=(e,s,g)=>e.filter(o=>B?pe({item:s(o),inputValue:g}):xe?xe({item:o,itemToString:s,inputValue:g}):Be());d.useEffect(()=>{ie.current=se},[se]),d.useEffect(()=>{ie.current&&ie.current(l)},[l]);const st=()=>{v?.current&&v.current.focus()},ot=e=>J(L,b,e||null),lt=e=>Xt({...n,items:ot(e)},e),at=d.useCallback((e,s)=>{const{type:g,changes:o}=s,{highlightedIndex:E}=o;switch(g){case qt:{if(R&&E=="-1"){const de=l;return o.selectedItem=de,T&&T({selectedItem:l,inputValue:l}),o}return e.inputValue&&E=="-1"&&o.selectedItem?{...o,inputValue:b(o.selectedItem)}:e.inputValue&&E=="-1"&&!R&&!o.selectedItem?{...o,inputValue:""}:o}case zt:return R?(le(l),Q(o.selectedItem),T&&T({selectedItem:o.selectedItem,inputValue:l}),o):o.selectedItem&&!R?o:{...o,isOpen:!0};case Ht:case Kt:return o.isOpen&&!o.selectedItem?{...o}:o;case Qt:return{...o,highlightedIndex:e.highlightedIndex};case Jt:case Gt:return E===-1?{...o,highlightedIndex:0}:o;case Ut:return{...o,highlightedIndex:e.highlightedIndex};default:return o}},[R,l,T]),rt=e=>s=>{if(be&&be(s),P){s.preventDownshiftDefault=!0,s?.persist?.();return}s.target===v.current&&e&&(s.preventDownshiftDefault=!0,s?.persist?.())},Te=!k&&q,it=_(`${c}--combo-box`,{[`${c}--combo-box--invalid--focused`]:k&&re,[`${c}--list-box--up`]:S==="top",[`${c}--combo-box--warning`]:Te,[`${c}--combo-box--readonly`]:P,[`${c}--autoalign`]:h}),ct=_(`${c}--label`,{[`${c}--label--disabled`]:I}),$e=`combobox-helper-text-${ae}`,Ee=`combobox-warn-text-${ae}`,_e=`combobox-invalid-text-${ae}`,ut=_(`${c}--form__helper-text`,{[`${c}--form__helper-text--disabled`]:I}),dt=_(`${c}--list-box__wrapper`,[y,{[`${c}--list-box__wrapper--fluid--invalid`]:U&&k,[`${c}--list-box__wrapper--fluid--focus`]:U&&re,[`${c}--list-box__wrapper--slug`]:z}]),mt=_(`${c}--text-input`,{[`${c}--text-input--empty`]:!l,[`${c}--combo-box--input--focus`]:re}),Se=he;let De;z&&z.type?.displayName==="AILabel"&&(De=i.cloneElement(z,{size:"mini"}));const{getInputProps:pt,getItemProps:ft,getLabelProps:gt,getMenuProps:Ne,getToggleButtonProps:ht,isOpen:w,highlightedIndex:ue,selectedItem:G,closeMenu:Ve,openMenu:ke,reset:Le,selectItem:j,setHighlightedIndex:Q,setInputValue:X,toggleMenu:W}=ze({items:J(L,b,l),inputValue:l,itemToString:e=>b(e),onInputValueChange(e){let{inputValue:s}=e;const g=s||"";le(g),D&&!s&&T({selectedItem:G,inputValue:g}),Q(lt(g)),m(s===null?0:g.length)},onSelectedItemChange(e){let{selectedItem:s}=e;T({selectedItem:s})},onHighlightedIndexChange:e=>{let{highlightedIndex:s}=e;if(s>-1&&typeof window!==void 0){const o=document.querySelectorAll(`li.${c}--list-box__menu-item[role="option"]`)[s];o&&o.scrollIntoView({behavior:"smooth",block:"nearest"})}},initialSelectedItem:ne,inputId:te,stateReducer:at,isItemDisabled(e,s){return e.disabled},...V});d.useEffect(()=>{C&&(C.current={closeMenu:Ve,openMenu:ke,reset:Le,selectItem:j,setHighlightedIndex:Q,setInputValue:X,toggleMenu:W})},[Ve,ke,Le,j,Q,X,W]),d.useEffect(()=>{a.current&&a.current.setSelectionRange(r,r)},[l,r]);const bt=ht({disabled:I||P,onClick:rt(w),onMouseUp(e){w&&e.stopPropagation()}}),Re=e=>{nt(e.type==="focus")},xt=P?{onKeyDown:e=>{e.key!=="Tab"&&e.preventDefault()},onClick:e=>{e.preventDefault(),e.currentTarget.focus()}}:{},It=k&&ge&&_e||q&&ye&&Ee||O&&!U&&$e||void 0,ve=d.useMemo(()=>Ne({"aria-label":f||x,ref:h?$.setFloating:null}),[h,f,x,Ne,$.setFloating]);return d.useEffect(()=>{if(v.current&&a.current&&H){const e=l.length,s=e+H.length;a.current.value=l+H,a.current.setSelectionRange(e,s)}},[l,H]),i.createElement("div",{className:dt},Ie&&i.createElement(Pe,N({as:"label",className:ct},gt()),Ie),i.createElement(me,{onFocus:Re,onBlur:Re,className:it,disabled:I,invalid:k,invalidText:ge,invalidTextId:_e,isOpen:w,light:Xe,size:Ze,warn:q,ref:h?$.setReference:null,warnText:ye,warnTextId:Ee},i.createElement("div",{className:`${c}--list-box__field`},i.createElement("input",N({disabled:I,className:mt,type:"text",tabIndex:0,"aria-haspopup":"listbox",title:v?.current?.value},pt({"aria-controls":w?void 0:ve.id,placeholder:Ye,value:l,onChange:e=>{const s=e.target.value;X(s)},ref:vt(v,p,a),onKeyDown:e=>{if(M(e,St)&&e.stopPropagation(),M(e,Dt)&&(!l||R)&&(W(),ue!==-1&&j(J(L,b,l)[ue]),R&&w&&l&&T({selectedItem:G,inputValue:l}),e.preventDownshiftDefault=!0,e?.persist?.()),M(e,Nt)&&l&&e.target===v.current&&w&&(W(),e.preventDownshiftDefault=!0,e?.persist?.()),M(e,Vt)&&e.code!=="Numpad7"&&e.target.setSelectionRange(0,0),M(e,kt)&&e.code!=="Numpad1"&&e.target.setSelectionRange(e.target.value.length,e.target.value.length),e.altKey&&e.key=="ArrowDown"&&(e.preventDownshiftDefault=!0,w||W()),e.altKey&&e.key=="ArrowUp"&&(e.preventDownshiftDefault=!0,w&&W()),B&&e.key==="Tab"){const s=L.find(g=>b(g).toLowerCase().startsWith(l.toLowerCase()));if(s){const g=b(s);X(g),m(g.length),j(s)}}}}),et,xt,{readOnly:P,"aria-describedby":It})),k&&i.createElement(Pt,{className:`${c}--list-box__invalid-icon`}),Te&&i.createElement(Wt,{className:`${c}--list-box__invalid-icon ${c}--list-box__invalid-icon--warning`}),l&&i.createElement(Ke,{clearSelection:()=>{j(null)},translateWithId:we,disabled:I||P,onClearSelection:st,selectionCount:0}),i.createElement(Ue,N({},bt,{isOpen:w,translateWithId:we}))),De,i.createElement(me.Menu,ve,w?J(L,b,l).map((e,s)=>{const o=e!==null&&typeof e=="object"&&"text"in e&&he?e.text?.toString():b(e),E=ft({item:e,index:s}),de=E["aria-disabled"],{"aria-disabled":tn,...wt}=E;return i.createElement(me.MenuItem,N({key:E.id,isActive:G===e,isHighlighted:ue===s,title:o,disabled:de},wt),Se?i.createElement(Se,N({key:E.id},e)):b(e),G===e&&i.createElement(Rt,{className:`${c}--list-box__menu-item__selected-icon`}))}):null)),O&&!k&&!q&&!U&&i.createElement(Pe,{as:"div",id:$e,className:ut},O))});fe.displayName="ComboBox";fe.propTypes={allowCustomValue:t.bool,"aria-label":t.string,ariaLabel:We(t.string),autoAlign:t.bool,className:t.string,direction:t.oneOf(["top","bottom"]),disabled:t.bool,downshiftProps:t.object,downshiftActions:t.exact({current:t.any}),helperText:t.node,id:t.string.isRequired,initialSelectedItem:t.oneOfType([t.object,t.string,t.number]),invalid:t.bool,invalidText:t.node,itemToElement:t.func,itemToString:t.func,items:t.array.isRequired,light:We(t.bool),onChange:t.func.isRequired,onInputChange:t.func,onToggleClick:t.func,placeholder:t.string,readOnly:t.bool,selectedItem:t.oneOfType([t.object,t.string,t.number]),shouldFilterItem:t.func,size:He,slug:t.node,titleText:t.node,translateWithId:t.func,typeahead:t.bool,warn:t.bool,warnText:t.node};const Ge=n=>{let{className:p,size:r,hideLabel:m,...u}=n;const a=A(),x=_(p,`${a}--skeleton`,`${a}--form-item`,{[`${a}--list-box--${r}`]:r});return i.createElement("div",N({className:x},u),!m&&i.createElement("span",{className:`${a}--label ${a}--skeleton`}),i.createElement("div",{className:`${a}--skeleton ${a}--dropdown`}))};Ge.propTypes={className:t.string,hideLabel:t.bool,size:He};const Yt=n=>n?n.text:"",Zt=n=>typeof n=="string"?{id:n,text:n}:n,en={items:[]},Qe=({className:n,disabled:p,emptyText:r,id:m,items:u=en.items,label:a,loading:x=!1,onChange:f,selectedItem:h,size:y="md",titleText:S,...I})=>{const C=yt(),V=A();if(x)return F.jsxs("div",{className:`${V}--list-box__wrapper`,children:[S&&F.jsx("span",{className:`${V}--label`,children:S}),F.jsx(Ge,{className:`${V}--combo-box ${V}--list-box ${V}--list-box--${y} ${n||""}`,hideLabel:!0,id:m})]});const O=u.map(Zt),te=r||C.formatMessage({id:"dashboard.tooltipDropdown.empty",defaultMessage:"No items found"});return F.jsx(fe,{className:n,disabled:p,id:m,initialSelectedItem:h,items:O,itemToString:Yt,onChange:f,placeholder:O.length===0?te:a,size:y,titleText:S,translateWithId:Ft(C),...I},JSON.stringify(h))};Qe.__docgenInfo={description:"",methods:[],displayName:"TooltipDropdown",props:{items:{defaultValue:{value:"[]",computed:!1},required:!1},loading:{defaultValue:{value:"false",computed:!1},required:!1},size:{defaultValue:{value:"'md'",computed:!1},required:!1}}};const yn={args:{id:"tooltip-dropdown-id",label:"Select an item",items:["item 1","item 2","item 3","item 4","item 5","item 6"],loading:!1,onChange:()=>{},titleText:""},component:Qe,decorators:[n=>F.jsx("div",{style:{width:"200px"},children:F.jsx(n,{})})],title:"TooltipDropdown"},Y={},Z={args:{loading:!0}},ee={args:{items:[]}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:"{}",...Y.parameters?.docs?.source}}};Z.parameters={...Z.parameters,docs:{...Z.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true
  }
}`,...Z.parameters?.docs?.source}}};ee.parameters={...ee.parameters,docs:{...ee.parameters?.docs,source:{originalSource:`{
  args: {
    items: []
  }
}`,...ee.parameters?.docs?.source}}};const Cn=["Default","Loading","Empty"];export{Y as Default,ee as Empty,Z as Loading,Cn as __namedExportsOrder,yn as default};
