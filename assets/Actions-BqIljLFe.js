import{j as R}from"./jsx-runtime-QvtbNqby.js";import{r as o,R as a}from"./index-BjzEU6Zr.js";import{u as ae}from"./index-yfVukVkJ.js";import{u as A}from"./usePrefix-CXWdRn9x.js";import{B as U}from"./Button-xjCpe_BM.js";import{b as J,d as oe,e as se,g as re,F as ie,_,c as Q,o as le,m as K,A as ce,i as de,S as ue,u as me,s as fe,f as pe}from"./floating-ui.dom.mjs-PU7UL9dJ.js";import{c as S}from"./index-CjLpwf8N.js";import{P as e}from"./index-kGlasm3i.js";import{u as W}from"./useControllableState-Co_owzu1.js";import{a as ge}from"./Tooltip-BJBVfZ_G.js";import{M as G,u as be,b as X,c as he,O as xe,a as ye}from"./index-lRp1do-S.js";import{T as Ce}from"./deprecate-GNGtdTso.js";import{e as Ie,f as ke,d as Y,c as Ee}from"./bucket-2-C9DXCKPV.js";import{m as we}from"./mergeRefs-CTUecegF.js";import{M as Re}from"./Modal-C1MzBDlE.js";var H,V;const j=o.forwardRef(function(C,d){let{children:p,className:s,disabled:g,kind:u="default",label:h,onClick:m,renderIcon:f,shortcut:x,...r}=C;const[t,i]=o.useState(!1),[l,b]=o.useState(!1),{refs:c,floatingStyles:n,context:E}=J({open:t,onOpenChange:i,placement:l?"left-start":"right-start",whileElementsMounted:Q,middleware:[le({mainAxis:-6,crossAxis:-6})]}),{getReferenceProps:M,getFloatingProps:v}=oe([se(E,{delay:100,enabled:!0,handleClose:re({requireIntent:!1})})]),y=A(),N=o.useContext(G),D=o.useRef(null),O=ge([d,D,c.setReference]),w=!!p,$=g&&!w,q=u==="danger"&&!w;function F(){N.dispatch({type:"registerItem",payload:{ref:D,disabled:!!g}})}function T(){D.current&&i(!0)}function P(){i(!1)}function B(I){$||(w?T():(N.state.requestCloseRoot(I),m&&m(I)))}function te(I){w&&K(I,ce)&&(T(),I.stopPropagation()),(K(I,de)||K(I,ue))&&B(I),r.onKeyDown&&r.onKeyDown(I)}const ne=S(s,`${y}--menu-item`,{[`${y}--menu-item--disabled`]:$,[`${y}--menu-item--danger`]:q});o.useEffect(()=>{F()},[]);const{direction:L}=be();o.useEffect(()=>{document?.dir==="rtl"||L==="rtl"?b(!0):b(!1)},[L]);const z=N.state.mode==="basic"||r.role==="menuitemcheckbox"||r.role==="menuitemradio";return o.useEffect(()=>{z&&f&&!N.state.hasIcons&&N.dispatch({type:"enableIcons"})},[z,f,N.state.hasIcons,N]),o.useEffect(()=>{Object.keys(n).forEach(I=>{c.floating.current&&I!=="position"&&(c.floating.current.style[I]=n[I])})},[n,c.floating]),a.createElement(ie,{context:E,order:["reference","floating"],modal:!1},a.createElement("li",_({role:"menuitem"},r,{ref:O,className:ne,tabIndex:-1,"aria-disabled":$??void 0,"aria-haspopup":w??void 0,"aria-expanded":w?t:void 0,onClick:B,onKeyDown:te},M()),a.createElement("div",{className:`${y}--menu-item__icon`},z&&f&&a.createElement(f,null)),a.createElement(Ce,{as:"div",className:`${y}--menu-item__label`,title:h},h),x&&!w&&a.createElement("div",{className:`${y}--menu-item__shortcut`},x),w&&a.createElement(a.Fragment,null,a.createElement("div",{className:`${y}--menu-item__shortcut`},l?H||(H=a.createElement(Ie,null)):V||(V=a.createElement(ke,null))),a.createElement(X,_({label:h,open:t,onClose:()=>{P(),D.current?.focus()},ref:c.setFloating},v()),p))))});j.propTypes={children:e.node,className:e.string,disabled:e.bool,kind:e.oneOf(["default","danger"]),label:e.string.isRequired,onClick:e.func,renderIcon:e.oneOfType([e.func,e.object]),shortcut:e.string};const Me=o.forwardRef(function(C,d){let{className:p,defaultSelected:s,label:g,onChange:u,selected:h,...m}=C;const f=A(),x=o.useContext(G);x.state.mode;const[r,t]=W({value:h,onChange:u,defaultValue:s??!1});function i(b){t(!r),u&&u(b)}o.useEffect(()=>{x.state.hasIcons||x.dispatch({type:"enableIcons"})},[x.state.hasIcons,x]);const l=S(p,`${f}--menu-item-selectable--selected`);return a.createElement(j,_({},m,{ref:d,label:g,className:l,role:"menuitemcheckbox","aria-checked":r,renderIcon:r?Y:void 0,onClick:i}))});Me.propTypes={className:e.string,defaultSelected:e.bool,label:e.string.isRequired,onChange:e.func,selected:e.bool};const Ne=o.forwardRef(function(C,d){let{children:p,className:s,label:g,...u}=C;const h=A(),m=S(s,`${h}--menu-item-group`);return a.createElement("li",{className:m,role:"none",ref:d},a.createElement("ul",_({},u,{role:"group","aria-label":g}),p))});Ne.propTypes={children:e.node,className:e.string,label:e.string.isRequired};const Se=k=>k.toString(),ve=o.forwardRef(function(C,d){let{className:p,defaultSelectedItem:s,items:g,itemToString:u=Se,label:h,onChange:m,selectedItem:f,...x}=C;const r=A(),t=o.useContext(G);t.state.mode;const[i,l]=W({value:f,onChange:m,defaultValue:s});function b(n,E){l(n),m&&m(E)}o.useEffect(()=>{t.state.hasIcons||t.dispatch({type:"enableIcons"})},[t.state.hasIcons,t]);const c=S(p,`${r}--menu-item-radio-group`);return a.createElement("li",{className:c,role:"none",ref:d},a.createElement("ul",_({},x,{role:"group","aria-label":h}),g.map((n,E)=>a.createElement(j,{key:E,label:u(n),role:"menuitemradio","aria-checked":n===i,renderIcon:n===i?Y:void 0,onClick:M=>{b(n,M)}}))))});ve.propTypes={className:e.string,defaultSelectedItem:e.any,itemToString:e.func,items:e.array,label:e.string.isRequired,onChange:e.func,selectedItem:e.any};const Z=o.forwardRef(function(C,d){let{className:p,...s}=C;const g=A(),u=S(p,`${g}--menu-item-divider`);return a.createElement("li",_({},s,{className:u,role:"separator",ref:d}))});Z.propTypes={className:e.string};const Te=["primary","tertiary","ghost"],_e="primary",ee=o.forwardRef(function(C,d){let{children:p,className:s,disabled:g,kind:u=_e,label:h,size:m="lg",menuAlignment:f="bottom",tabIndex:x=0,...r}=C;const t=me("MenuButton"),i=A(),l=o.useRef(null),b=[pe({crossAxis:!1})];(f==="bottom"||f==="top")&&b.push(fe({apply(T){let{rects:P,elements:B}=T;Object.assign(B.floating.style,{width:`${P.reference.width}px`})}}));const{refs:c,floatingStyles:n,placement:E,middlewareData:M}=J({placement:f,strategy:"fixed",middleware:b,whileElementsMounted:Q}),v=we(d,l),{open:y,handleClick:N,handleMousedown:D,handleClose:O}=he(l);o.useLayoutEffect(()=>{Object.keys(n).forEach(T=>{c.floating.current&&(c.floating.current.style[T]=n[T])})},[n,c.floating,M,E,y]);function w(){l.current&&N()}const $=S(`${i}--menu-button__container`,s),q=S(`${i}--menu-button__trigger`,{[`${i}--menu-button__trigger--open`]:y}),F=S(`${i}--menu-button__${f}`);return a.createElement("div",_({},r,{ref:v,"aria-owns":y?t:void 0,className:$}),a.createElement(U,{ref:c.setReference,className:q,size:m,tabIndex:x,kind:u,renderIcon:Ee,disabled:g,"aria-haspopup":!0,"aria-expanded":y,onClick:w,onMouseDown:D,"aria-controls":y?t:void 0},h),a.createElement(X,{containerRef:l,menuAlignment:f,className:F,ref:c.setFloating,id:t,legacyAutoalign:!1,label:h,mode:"basic",size:m,open:y,onClose:O},p))});ee.propTypes={children:e.node.isRequired,className:e.string,disabled:e.bool,kind:e.oneOf(Te),label:e.string.isRequired,menuAlignment:e.oneOf(["top","top-start","top-end","bottom","bottom-start","bottom-end"]),size:e.oneOf(["sm","md","lg"]),tabIndex:e.number};function De({items:k,kind:C,resource:d}){const p=ae(),[s,g]=o.useState({action:void 0,modal:{},showDialog:!1});function u(){g(r=>({...r,showDialog:!1}))}function h(){s.action(),u()}function m(r,t){t?g(i=>({...i,action:r,modal:t,showDialog:!0})):r()}function f(){const r=C==="button";if(r&&k.length===1){const{action:i,actionText:l,danger:b,icon:c,modalProperties:n}=k[0];return R.jsx(U,{kind:b?"danger":"tertiary",onClick:()=>m(()=>i(d),n),renderIcon:c,size:"md",children:l})}const t=p.formatMessage({id:"dashboard.list.menu.tooltip",defaultMessage:"Actions"});return r?R.jsx(ee,{className:"tkn--actions-dropdown",kind:"tertiary",label:t,menuAlignment:"bottom-end",size:"md",children:k.map(i=>{const{actionText:l,action:b,danger:c,disable:n,hasDivider:E,modalProperties:M}=i,v=n&&n(d);return R.jsxs(o.Fragment,{children:[E&&R.jsx(Z,{}),R.jsx(j,{disabled:v,kind:c?"danger":"default",label:l,onClick:()=>m(()=>b(d),M)},l)]},l)})}):R.jsx(xe,{align:"left","aria-label":t,className:"tkn--actions-dropdown",flipped:!0,iconDescription:t,selectorPrimaryFocus:"button:not([disabled])",title:t,children:k.map(i=>{const{actionText:l,action:b,danger:c,disable:n,hasDivider:E,modalProperties:M}=i,v=n&&n(d);return R.jsx(ye,{disabled:v,hasDivider:E,isDelete:c,itemText:l,onClick:()=>m(()=>b(d),M),requireTitle:!0},l)})})}const x=s.showDialog?R.jsx(Re,{open:s.showDialog,modalHeading:s.modal.heading,primaryButtonText:s.modal.primaryButtonText,secondaryButtonText:s.modal.secondaryButtonText||p.formatMessage({id:"dashboard.modal.cancelButton",defaultMessage:"Cancel"}),onRequestClose:u,onRequestSubmit:h,onSecondarySubmit:u,danger:s.modal.danger,children:s.modal.body&&s.modal.body(d)}):null;return R.jsxs(R.Fragment,{children:[f(),x]})}De.__docgenInfo={description:"",methods:[],displayName:"Actions"};export{De as A};
