import{b as rt,o as st,f as at,q as it,h as lt,c as ct,_,u as ut,m as B,E as Y,i as ft,S as pt}from"./floating-ui.dom.mjs-PU7UL9dJ.js";import{c as M}from"./index-CjLpwf8N.js";import{P as a}from"./index-kGlasm3i.js";import{r as e,R as c}from"./index-BjzEU6Zr.js";import{u as K}from"./usePrefix-CXWdRn9x.js";const dt=typeof window<"u"?e.useLayoutEffect:e.useEffect;var Q=dt;const j={};function mt(o,l,n){return function(p,i,t){if(p[i]!==void 0){if(!j[t]||!j[t][i]){j[t]={...j[t],[i]:!0};const y=p[i],E=n?n(y):null;l&&!l.includes(y)&&(n?`${y}${i}${t}${E}${y}`:`${y}${i}${t}${l.join(", ")}${y}`)}for(var m=arguments.length,C=new Array(m>3?m-3:0),g=3;g<m;g++)C[g-3]=arguments[g];return o(p,i,t,...C)}}}const X=o=>e.useCallback(l=>{o.forEach(n=>{typeof n=="function"?n(l):n!=null&&(n.current=l)})},o);function Pt(o,l,n){const r=e.useRef(null);e.useEffect(()=>{r.current=n},[n]),e.useEffect(()=>{const p=t=>{r.current&&r.current(t)},i="current"in o?o.current:o;return i?.addEventListener?.(l,p),()=>{i?.removeEventListener?.(l,p)}},[o,l])}function z(o,l){const n=e.useRef(null);e.useEffect(()=>{n.current=l},[l]),e.useEffect(()=>{function r(p){n.current&&n.current(p)}return window.addEventListener(o,r),()=>{window.removeEventListener(o,r)}},[o])}function gt(o){switch(o){case"top-left":return"top-start";case"top-right":return"top-end";case"bottom-left":return"bottom-start";case"bottom-right":return"bottom-end";case"left-bottom":return"left-end";case"left-top":return"left-start";case"right-bottom":return"right-end";case"right-top":return"right-start";default:return o}}const Z=c.createContext({setFloating:{current:null},caretRef:{current:null},autoAlign:null}),ht=o=>({"top-left":"top-start","top-right":"top-end","bottom-left":"bottom-start","bottom-right":"bottom-end","left-bottom":"left-end","left-top":"left-start","right-bottom":"right-end","right-top":"right-start"})[o],tt=c.forwardRef(function(l,n){let{isTabTip:r,align:p=r?"bottom-start":"bottom",as:i="span",autoAlign:t=!1,caret:m=!r,className:C,children:g,dropShadow:y=!0,highContrast:E=!1,onRequestClose:h,open:S,...D}=l;const b=K(),k=e.useRef(null),w=e.useRef(null),A=e.useRef(null);let $=gt(p);z("blur",()=>{S&&h?.()}),z("click",d=>{S&&!A?.current?.contains(d.target)&&h?.()});const F=c.Children.toArray(g).some(d=>d?.props?.className?.includes("slug"))?7:6,T=e.useRef({offset:10,caretHeight:F});Q(()=>{if(m&&A.current){const d=window.getComputedStyle(A.current,null),s=d.getPropertyValue("--cds-popover-offset"),f=d.getPropertyValue("--cds-popover-caret-height");s&&(T.current.offset=s.includes("px")?Number(s.split("px",1)[0])*1:Number(s.split("rem",1)[0])*16),f&&(T.current.caretHeight=f.includes("px")?Number(f.split("px",1)[0])*1:Number(f.split("rem",1)[0])*16)}});const{refs:v,floatingStyles:H,placement:P,middlewareData:x}=rt(t?{placement:$,strategy:"fixed",middleware:[st(r?0:T?.current?.offset),at({fallbackAxisSideDirection:"start"}),it({element:w}),lt()],whileElementsMounted:ct}:{}),V=e.useMemo(()=>({floating:k,setFloating:v.setFloating,caretRef:w,autoAlign:t}),[v.setFloating,t]);r&&(["bottom-start","bottom-end"].includes($)||($="bottom-start")),e.useEffect(()=>{if(t){const d={...H,visibility:x.hide?.referenceHidden?"hidden":"visible"};if(Object.keys(d).forEach(s=>{v.floating.current&&(v.floating.current.style[s]=d[s])}),m&&x&&x.arrow&&w?.current){const{x:s,y:f}=x.arrow,R={top:"bottom",right:"left",bottom:"top",left:"right"}[P.split("-")[0]];w.current.style.left=s!=null?`${s}px`:"",w.current.style.top=f!=null?`${f}px`:"",w.current.style.right="",w.current.style.bottom="",R&&(w.current.style[R]=`${-T?.current?.caretHeight}px`)}}},[H,v.floating,t,x,P,m]);const I=X([n,A]),W=t&&P!==$?P:$,O=M({[`${b}--popover-container`]:!0,[`${b}--popover--caret`]:m,[`${b}--popover--drop-shadow`]:y,[`${b}--popover--high-contrast`]:E,[`${b}--popover--open`]:S,[`${b}--popover--auto-align ${b}--autoalign`]:t,[`${b}--popover--${W}`]:!0,[`${b}--popover--tab-tip`]:r},C),L=c.Children.map(g,d=>{const s=d,f=s?.type?.displayName,R=s?.type==="button",et=t&&f&&["ToggletipButton"].includes(f),ot=t&&!["ToggletipContent","PopoverContent"].includes(f);if(c.isValidElement(s)&&(R||et||ot)){const G=s?.props?.className,N=(s?.props).ref,nt=M(`${b}--popover--tab-tip__button`,G);return c.cloneElement(s,{className:r&&s?.type==="button"?nt:G||"",ref:q=>{(t&&s?.type?.displayName!=="PopoverContent"||t&&s?.type?.displayName==="ToggletipButton")&&v.setReference(q),typeof N=="function"?N(q):N!=null&&(N.current=q)}})}else return s}),u=i;return c.createElement(Z.Provider,{value:V},c.createElement(u,_({},D,{className:O,ref:I}),t||r?L:g))});tt.propTypes={align:mt(a.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"],ht),as:a.oneOfType([a.string,a.elementType]),autoAlign:a.bool,caret:a.bool,children:a.node,className:a.string,dropShadow:a.bool,highContrast:a.bool,isTabTip:a.bool,onRequestClose:a.func,open:a.bool.isRequired};function bt(o,l){let{className:n,children:r,...p}=o;const i=K(),{setFloating:t,caretRef:m,autoAlign:C}=c.useContext(Z),g=X([t,l]);return c.createElement("span",_({},p,{className:`${i}--popover`}),c.createElement("span",{className:M(`${i}--popover-content`,n),ref:g},r,C&&c.createElement("span",{className:M({[`${i}--popover-caret`]:!0,[`${i}--popover--auto-align`]:!0}),ref:m})),!C&&c.createElement("span",{className:M({[`${i}--popover-caret`]:!0}),ref:m}))}const U=c.forwardRef(bt);U.displayName="PopoverContent";U.propTypes={children:a.node,className:a.string};function vt(o){const[l,n]=e.useState(o),r=e.useRef(null),p=e.useCallback(function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(window.clearTimeout(r.current??void 0),r.current=null,t===0){n(i);return}r.current=window.setTimeout(()=>{n(i),r.current=null},t)},[]);return e.useEffect(()=>()=>{window.clearTimeout(r.current??void 0)},[]),[l,p]}const J=new Set(["mouseup","touchend","touchcancel"]);function yt(o){let{align:l="top",className:n,children:r,label:p,description:i,enterDelayMs:t=100,leaveDelayMs:m=300,defaultOpen:C=!1,closeOnActivation:g=!1,...y}=o;e.useRef(null);const[E,h]=vt(C),[S,D]=e.useState(!1),[b,k]=e.useState(!1),[w,A]=e.useState(!1),$=ut("tooltip"),F=K(),T=c.Children.only(r),v={onFocus:()=>!b&&h(!0),onBlur:()=>{h(!1),k(!1)},onClick:()=>g&&h(!1),onMouseEnter:x,onMouseLeave:I,onMouseDown:V,onMouseMove:W,onTouchStart:O};function H(u){const d=Object.keys(v).filter(f=>f.startsWith("on")),s={};return d.forEach(f=>{s[f]=R=>{v[f](R),u?.[f]&&u?.[f](R)}}),s}p?v["aria-labelledby"]=$:v["aria-describedby"]=$;const P=e.useCallback(u=>{E&&B(u,Y)&&(u.stopPropagation(),h(!1)),E&&g&&(B(u,ft)||B(u,pt))&&h(!1)},[g,E,h]);Q(()=>{if(!E)return;function u(d){B(d,Y)&&P(d)}return document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}},[E,P]);function x(){y?.onMouseEnter||(A(!0),h(!0,t))}function V(){k(!0),O()}function I(){A(!1),!S&&h(!1,m)}function W(u){u.buttons===1?D(!0):D(!1)}function O(){D(!0)}const L=e.useCallback(()=>{D(!1),w||h(!1,m)},[w,m,h]);return e.useEffect(()=>(S&&J.forEach(u=>{document.addEventListener(u,L)}),()=>{J.forEach(u=>{document.removeEventListener(u,L)})}),[S,L]),c.createElement(tt,_({},y,{align:l,className:M(`${F}--tooltip`,n),dropShadow:!1,highContrast:!0,onKeyDown:P,onMouseLeave:I,open:E}),c.createElement("div",{className:`${F}--tooltip-trigger__wrapper`},T!==void 0?c.cloneElement(T,{...v,...H(T.props)}):null),c.createElement(U,{"aria-hidden":E?"false":"true",className:`${F}--tooltip-content`,id:$,onMouseEnter:x,role:"tooltip"},p||i))}yt.propTypes={align:a.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top","top-start","top-end","bottom-start","bottom-end","left-end","left-start","right-end","right-start"]),children:a.node,className:a.string,closeOnActivation:a.bool,defaultOpen:a.bool,description:a.node,enterDelayMs:a.number,label:a.node,leaveDelayMs:a.number};export{tt as P,yt as T,X as a,U as b,Pt as c,z as d,Q as u};
