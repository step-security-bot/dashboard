import{P as e}from"./index-kGlasm3i.js";import{R as t,r as L}from"./index-BjzEU6Zr.js";import{c as r}from"./index-CjLpwf8N.js";import{u as Z}from"./usePrefix-CXWdRn9x.js";import{T as Q,d as le}from"./deprecate-GNGtdTso.js";import{W as ue,a as $e}from"./bucket-18-ByJs4WER.js";import{u as ge,_ as me}from"./floating-ui.dom.mjs-PU7UL9dJ.js";import{F as be}from"./FormContext-IWjAIOZU.js";import{T as he}from"./Tooltip-BJBVfZ_G.js";import{V as fe,e as we}from"./bucket-17-BNnKjYXl.js";import{n as ce}from"./noopFn-g4z370MD.js";function xe(b){let{id:f,readOnly:u,disabled:p,invalid:o,invalidText:m,warn:y,warnText:w}=b;const d=Z(),s={disabled:!u&&p,invalid:!u&&o,invalidId:`${f}-error-msg`,warn:!u&&!o&&y,warnId:`${f}-warn-msg`,validation:null,icon:null,helperId:`${f}-helper-text`};return s.invalid?(s.icon=ue,s.validation=t.createElement(Q,{as:"div",className:`${d}--form-requirement`,id:s.invalidId},m)):s.warn&&(s.icon=$e,s.validation=t.createElement(Q,{as:"div",className:`${d}--form-requirement`,id:s.warnId},w)),s}const ve=b=>({"data-invalid":!0,"aria-invalid":!0,"aria-describedby":b}),_e=b=>({"aria-describedby":b}),ye=b=>({"aria-describedby":b}),ae=b=>{let{sharedTextInputProps:f,invalid:u,invalidId:p,warn:o,warnId:m,hasHelper:y,helperId:w}=b;return{...f,...u?ve(p):{},...o?_e(m):{},...y?ye(w):{}}},se=t.forwardRef(function(f,u){let{labelText:p,className:o,id:m,placeholder:y,onChange:w=ce,onClick:d=ce,disabled:s=!1,hideLabel:S,invalid:v=!1,invalidText:V="",helperText:T="",light:H,type:N="password",togglePasswordVisibility:E,tooltipPosition:h="bottom",tooltipAlignment:I="center",hidePasswordLabel:_="Hide password",showPasswordLabel:z="Show password",size:c=void 0,...x}=f;const a=Z(),W=ge(),l=m+"-error-msg",B=r(`${a}--text-input`,`${a}--password-input`,o,{[`${a}--text-input--light`]:H,[`${a}--text-input--invalid`]:v,[`${a}--text-input--${c}`]:c}),P={id:m,onChange:F=>{s||w?.(F)},onClick:F=>{s||d?.(F)},placeholder:y,type:N,ref:u,className:B,...x},k=r(`${a}--label`,{[`${a}--visually-hidden`]:S,[`${a}--label--disabled`]:s}),n=r(`${a}--form__helper-text`,{[`${a}--form__helper-text--disabled`]:s}),i=p?t.createElement("label",{htmlFor:m,className:k},p):null,$=v?t.createElement("div",{className:`${a}--form-requirement`,id:l},V):null,R=N==="text",M=R?t.createElement(fe,{className:`${a}--icon-visibility-off`}):t.createElement(we,{className:`${a}--icon-visibility-on`}),j=r(`${a}--text-input--password__visibility__toggle`,`${a}--btn`,`${a}--btn--icon-only`,`${a}--tooltip__trigger`,`${a}--tooltip--a11y`,{[`${a}--tooltip--${h}`]:h,[`${a}--tooltip--align-${I}`]:I}),A=T?`controlled-password-helper-text-${W}`:void 0,D=t.createElement(t.Fragment,null,t.createElement("input",me({},ae({invalid:v,sharedTextInputProps:P,invalidId:l,hasHelper:!!(!$&&T),helperId:A}),{"data-toggle-password-visibility":N==="password"})),t.createElement("button",{type:"button",className:j,onClick:E},t.createElement("span",{className:`${a}--assistive-text`},R?_:z),M)),G=T?t.createElement("div",{id:A,className:n},T):null;return t.createElement("div",{className:`${a}--form-item ${a}--text-input-wrapper ${a}--password-input-wrapper`},i,t.createElement("div",{className:`${a}--text-input__field-wrapper`,"data-invalid":v||null},v&&t.createElement(ue,{className:`${a}--text-input__invalid-icon`}),D),$||G)});se.displayName="ControlledPasswordInput";se.propTypes={className:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,helperText:e.node,hideLabel:e.bool,hidePasswordLabel:e.string,id:e.string.isRequired,invalid:e.bool,invalidText:e.node,labelText:e.node.isRequired,light:le(e.bool),onChange:e.func,onClick:e.func,placeholder:e.string,showPasswordLabel:e.string,size:e.oneOf(["sm","md","lg"]),tooltipAlignment:e.oneOf(["start","center","end"]),tooltipPosition:e.oneOf(["top","right","bottom","left"]),value:e.oneOfType([e.string,e.number])};const re=t.forwardRef(function(f,u){let{className:p,disabled:o=!1,helperText:m,hideLabel:y,hidePasswordLabel:w="Hide password",id:d,inline:s,invalid:S=!1,invalidText:v,labelText:V,light:T,onChange:H=()=>{},onClick:N=()=>{},onTogglePasswordVisibility:E,placeholder:h,readOnly:I,size:_="md",showPasswordLabel:z="Show password",tooltipPosition:c="bottom",tooltipAlignment:x="end",type:a="password",warn:W=!1,warnText:l,...B}=f;const[P,k]=L.useState(a),n=Z(),i=xe({id:d,invalid:S,invalidText:v,warn:W,warnText:l,readOnly:I,disabled:o}),{isFluid:$}=L.useContext(be),R=g=>{k(P==="password"?"text":"password"),E&&E(g)},M=r(`${n}--text-input`,`${n}--password-input`,p,{[`${n}--text-input--light`]:T,[`${n}--text-input--invalid`]:i.invalid,[`${n}--text-input--warning`]:i.warn,[`${n}--text-input--${_}`]:_,[`${n}--layout--size-${_}`]:_}),j={id:d,onChange:g=>{o||H(g)},onClick:g=>{o||N(g)},placeholder:h,type:P,className:M,readOnly:I,ref:u,...B},A=r(`${n}--form-item`,`${n}--text-input-wrapper`,`${n}--password-input-wrapper`,{[`${n}--text-input-wrapper--readonly`]:I,[`${n}--text-input-wrapper--light`]:T,[`${n}--text-input-wrapper--inline`]:s,[`${n}--text-input--fluid`]:$}),D=r(`${n}--label`,{[`${n}--visually-hidden`]:y,[`${n}--label--disabled`]:o,[`${n}--label--inline`]:s,[`${n}--label--inline--${_}`]:s&&!!_}),G=r(`${n}--form__helper-text`,{[`${n}--form__helper-text--disabled`]:o,[`${n}--form__helper-text--inline`]:s}),F=r(`${n}--text-input__field-outer-wrapper`,{[`${n}--text-input__field-outer-wrapper--inline`]:s}),te=r(`${n}--text-input__field-wrapper`,{[`${n}--text-input__field-wrapper--warning`]:i.warn}),ne=r({[`${n}--text-input__invalid-icon`]:i.invalid||i.warn,[`${n}--text-input__invalid-icon--warning`]:i.warn}),U=V?t.createElement("label",{htmlFor:d,className:D},V):null,J=m?t.createElement("div",{id:i.helperId,className:G},m):null,K=P==="text",ie=K?t.createElement(fe,{className:`${n}--icon-visibility-off`}):t.createElement(we,{className:`${n}--icon-visibility-on`}),q=r(`${n}--text-input--password__visibility__toggle`,`${n}--btn`,`${n}--tooltip__trigger`,`${n}--tooltip--a11y`,{[`${n}--tooltip--${c}`]:c,[`${n}--tooltip--align-${x}`]:x});let O;(c==="top"||c==="bottom")&&(x==="center"&&(O=c),x==="end"&&(O=`${c}-end`),x==="start"&&(O=`${c}-start`)),(c==="right"||c==="left")&&(O=c),!w||w.trim()===""?console.warn('Warning: The "hidePasswordLabel" should not be blank.'):(!z||z.trim()==="")&&console.warn('Warning: The "showPasswordLabel" should not be blank.');const X=t.createElement(t.Fragment,null,t.createElement("input",me({},ae({sharedTextInputProps:j,invalid:i.invalid,invalidId:i.invalidId,warn:i.warn,warnId:i.warnId,hasHelper:!!(m&&!$&&(s||!s&&!i.validation)),helperId:i.helperId}),{disabled:o,"data-toggle-password-visibility":P==="password"})),$&&t.createElement("hr",{className:`${n}--text-input__divider`}),t.createElement(he,{align:O,className:`${n}--toggle-password-tooltip`,label:K?w:z},t.createElement("button",{type:"button",className:q,disabled:o||I,onClick:R},ie)));L.useEffect(()=>{k(a)},[a]);const Y=i.icon;return t.createElement("div",{className:A},s?t.createElement("div",{className:`${n}--text-input__label-helper-wrapper`},U,!$&&J):U,t.createElement("div",{className:F},t.createElement("div",{className:te,"data-invalid":i.invalid||null},Y&&t.createElement(Y,{className:ne}),X,$&&!s&&i.validation),!$&&!s&&(i.validation||J)))});re.displayName="PasswordInput";re.propTypes={className:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,helperText:e.node,hideLabel:e.bool,hidePasswordLabel:e.string,id:e.string.isRequired,inline:e.bool,invalid:e.bool,readOnly:e.bool,invalidText:e.node,labelText:e.node.isRequired,light:le(e.bool),onChange:e.func,onClick:e.func,onTogglePasswordVisibility:e.func,placeholder:e.string,showPasswordLabel:e.string,size:e.oneOf(["sm","md","lg"]),tooltipAlignment:e.oneOf(["start","center","end"]),tooltipPosition:e.oneOf(["top","right","bottom","left"]),type:e.oneOf(["password","text"]),value:e.oneOfType([e.string,e.number]),warn:e.bool,warnText:e.node};function Te(b,f){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"characters";const p=f-b;if(p<=10&&p>0){const o=p===1?u.slice(0,-1):u;return`${p} ${o} left.`}return p<=0?`Maximum ${u} reached.`:null}const ee=t.forwardRef(function(f,u){let{className:p,disabled:o=!1,helperText:m,hideLabel:y,id:w,inline:d=!1,invalid:s=!1,invalidText:S,labelText:v,light:V,onChange:T=()=>{},onClick:H=()=>{},placeholder:N,readOnly:E,size:h,type:I="text",warn:_=!1,warnText:z,enableCounter:c=!1,maxCount:x,slug:a,...W}=f;const l=Z(),{defaultValue:B,value:P}=W,[k,n]=L.useState(B?.toString().length||P?.toString().length||0),i=xe({id:w,readOnly:E,disabled:o,invalid:s,invalidText:S,warn:_,warnText:z}),$=r(`${l}--text-input`,{[`${l}--text-input--light`]:V,[`${l}--text-input--invalid`]:i.invalid,[`${l}--text-input--warning`]:i.warn,[`${l}--text-input--${h}`]:h,[`${l}--layout--size-${h}`]:h}),R={id:w,onChange:C=>{i.disabled||(n(C.target.value?.length),T(C))},onClick:C=>{i.disabled||H(C)},placeholder:N,type:I,ref:u,className:$,title:N,disabled:i.disabled,readOnly:E,"aria-describedby":m&&i.helperId,...W};c&&(R.maxLength=x);const M=r([r(`${l}--form-item`,p)],`${l}--text-input-wrapper`,{[`${l}--text-input-wrapper--readonly`]:E,[`${l}--text-input-wrapper--light`]:V,[`${l}--text-input-wrapper--inline`]:d,[`${l}--text-input-wrapper--inline--invalid`]:d&&i.invalid}),j=r(`${l}--label`,{[`${l}--visually-hidden`]:y,[`${l}--label--disabled`]:i.disabled,[`${l}--label--inline`]:d,[`${l}--label--inline--${h}`]:d&&!!h}),A=r(`${l}--form__helper-text`,{[`${l}--form__helper-text--disabled`]:i.disabled,[`${l}--form__helper-text--inline`]:d}),D=r(`${l}--text-input__field-outer-wrapper`,{[`${l}--text-input__field-outer-wrapper--inline`]:d}),G=r(`${l}--text-input__field-wrapper`,{[`${l}--text-input__field-wrapper--warning`]:i.warn,[`${l}--text-input__field-wrapper--slug`]:a}),F=r({[`${l}--text-input__invalid-icon`]:i.invalid||i.warn,[`${l}--text-input__invalid-icon--warning`]:i.warn}),te=r(`${l}--label`,{[`${l}--label--disabled`]:o,[`${l}--text-input__label-counter`]:!0}),ne=c&&x?t.createElement(Q,{as:"div",className:te},`${k}/${x}`):null,U=v?t.createElement(Q,{as:"label",htmlFor:w,className:j},v):null,J=t.createElement("div",{className:`${l}--text-input__label-wrapper`},U,ne),K=m?t.createElement(Q,{as:"div",id:i.helperId,className:A},m):null,ie=t.createElement("input",ae({sharedTextInputProps:R,invalid:i.invalid,invalidId:i.invalidId,warn:i.warn,warnId:i.warnId})),{isFluid:q}=L.useContext(be),O=L.useRef(null),[X,Y]=L.useState(""),g=Te(k,x);L.useEffect(()=>{if(g&&g!==X){const C=O.current;if(C){C.textContent="";const pe=setTimeout(()=>{C&&(C.textContent=g,Y(g))},1e3);return()=>{pe&&clearTimeout(pe)}}}},[g,X]);const oe=i.icon;let de;return a&&a.type?.displayName==="AILabel"&&(de=t.cloneElement(a,{size:"mini"})),t.createElement("div",{className:M},d?t.createElement("div",{className:`${l}--text-input__label-helper-wrapper`},J,!q&&(i.validation||K)):J,t.createElement("div",{className:D},t.createElement("div",{className:G,"data-invalid":i.invalid||null},oe&&t.createElement(oe,{className:F}),ie,de,t.createElement("span",{className:`${l}--text-input__counter-alert`,role:"alert","aria-live":"assertive","aria-atomic":"true",ref:O},g),q&&t.createElement("hr",{className:`${l}--text-input__divider`}),q&&!d&&i.validation),!q&&!d&&(i.validation||K)))});ee.displayName="TextInput";ee.PasswordInput=re;ee.ControlledPasswordInput=se;ee.propTypes={className:e.string,defaultValue:e.oneOfType([e.string,e.number]),disabled:e.bool,enableCounter:e.bool,helperText:e.node,hideLabel:e.bool,id:e.string.isRequired,inline:e.bool,invalid:e.bool,invalidText:e.node,labelText:e.node.isRequired,light:le(e.bool),maxCount:e.number,onChange:e.func,onClick:e.func,placeholder:e.string,readOnly:e.bool,size:e.oneOf(["sm","md","lg"]),slug:e.node,type:e.string,value:e.oneOfType([e.string,e.number]),warn:e.bool,warnText:e.node};export{ee as T};
