import{j as I}from"./jsx-runtime-QvtbNqby.js";import{_ as U,a as O,b as W,u as w,F as q}from"./index-yfVukVkJ.js";import{r as o}from"./index-BjzEU6Zr.js";var T=60,S=60*60,b=60*60*24;function R(e){var r=Math.abs(e);return r<T?"second":r<S?"minute":r<b?"hour":"day"}function V(e){switch(e){case"second":return 1;case"minute":return T;case"hour":return S;default:return b}}function B(e,r){if(!e)return 0;switch(r){case"second":return e;case"minute":return e*T;default:return e*S}}var H=["second","minute","hour"];function d(e){return e===void 0&&(e="second"),H.indexOf(e)>-1}var L=function(e){var r=w(),u=r.formatRelativeTime,a=r.textComponent,t=e.children,n=e.value,c=e.unit,l=U(e,["children","value","unit"]),s=u(n||0,c,l);return typeof t=="function"?t(s):a?o.createElement(a,null,s):o.createElement(o.Fragment,null,s)},N=function(e){var r=e.value,u=r===void 0?0:r,a=e.unit,t=a===void 0?"second":a,n=e.updateIntervalInSeconds,c=U(e,["value","unit","updateIntervalInSeconds"]);O(!n||!!(n&&d(t)),"Cannot schedule update with unit longer than hour");var l=o.useState(),s=l[0],j=l[1],D=o.useState(0),M=D[0],C=D[1],x=o.useState(0),i=x[0],F=x[1],y;(t!==s||u!==M)&&(C(u||0),j(t),F(d(t)?B(u,t):0)),o.useEffect(function(){function m(){clearTimeout(y)}if(m(),!n||!d(t))return m;var f=i-n,_=R(f);if(_==="day")return m;var E=V(_),Y=f%E,p=f-Y,h=p>=i?p-E:p,A=Math.abs(h-i);return i!==h&&(y=setTimeout(function(){return F(h)},A*1e3)),m},[i,n,t]);var g=u||0,v=t;if(d(t)&&typeof i=="number"&&n){v=R(i);var P=V(v);g=Math.round(i/P)}return o.createElement(L,W({value:g,unit:v},c))};N.displayName="FormattedRelativeTime";const k=({date:e,formatTooltip:r=a=>a,relative:u})=>{const a=w();if(!e)return null;let t;if(u&&Intl.RelativeTimeFormat)t=I.jsx(N,{numeric:"auto",updateIntervalInSeconds:10,value:(new Date(e).getTime()-Date.now())/1e3});else{const c=new Date().getFullYear()!==new Date(e).getFullYear()?"numeric":void 0;t=I.jsx(q,{value:e,day:"numeric",month:"short",year:c,hour:"numeric",minute:"numeric"})}let n=a.formatDate(e,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"});return n=r(n),I.jsx("span",{title:n,children:t})};k.__docgenInfo={description:"",methods:[],displayName:"FormattedDateWrapper",props:{formatTooltip:{defaultValue:{value:"formattedDate => formattedDate",computed:!1},required:!1}}};export{k as F};
