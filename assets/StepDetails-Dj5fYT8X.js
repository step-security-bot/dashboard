import{j as e}from"./jsx-runtime-QvtbNqby.js";import{P as d}from"./index-kGlasm3i.js";import{u as S}from"./index-yfVukVkJ.js";import{a as R,g as C}from"./index-CfoIBI3E.js";import"./usePrefix-CXWdRn9x.js";import{T as V,a as y,b as r,c as D,d as l}from"./Tabs-CLCSIGLB.js";import{D as M}from"./DetailsHeader-e2YhChju.js";import{L as v}from"./Log-CMTIu5Vq.js";import{S as w}from"./StepDefinition-D8E6zbn8.js";const p=["logs","details"],u={onViewChange:()=>{},taskRun:{}},c=({definition:m,logContainer:f,onViewChange:h=u.onViewChange,skippedTask:g,stepName:x,stepStatus:t,taskRun:n=u.taskRun,view:b})=>{const a=S(),{exitCode:o,reason:j,status:i}=R(t),T=C(n).reason==="TaskRunCancelled"&&i!=="terminated"?"cancelled":i;let s=p.indexOf(b);return s===-1&&(s=0),e.jsxs("div",{className:"tkn--step-details",children:[e.jsx(M,{displayName:x,exitCode:o,hasWarning:o!==0,reason:j,status:T,stepStatus:t,taskRun:n}),e.jsxs(V,{onChange:k=>h(p[k.selectedIndex]),selectedIndex:s,children:[e.jsxs(y,{activation:"manual","aria-label":"Step details",children:[e.jsx(r,{children:a.formatMessage({id:"dashboard.taskRun.logs",defaultMessage:"Logs"})}),e.jsx(r,{children:a.formatMessage({id:"dashboard.resource.detailsTab",defaultMessage:"Details"})})]}),e.jsxs(D,{children:[e.jsx(l,{children:s===0&&g?e.jsx(v,{fetchLogs:()=>a.formatMessage({id:"dashboard.taskRun.logs.skipped",defaultMessage:"This step did not run as the task was skipped. See task status for more details."})}):f}),e.jsx(l,{children:s===1&&e.jsx(w,{definition:m})})]})]})]})};c.propTypes={onViewChange:d.func,taskRun:d.shape({})};c.__docgenInfo={description:"",methods:[],displayName:"StepDetails",props:{onViewChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},taskRun:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{}},required:!1}}};export{c as S};
